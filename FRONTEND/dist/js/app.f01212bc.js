(function(){"use strict";var e={9813:function(e,t,a){a.d(t,{N:function(){return qt}});var i=a(144),o=a(2202),r=a(1096),s=a(3551),n=function(){var e=this,t=e._self._c;return t(r.Z,[t("LogoBar"),t(o.Z,{staticStyle:{position:"absolute",right:"5%",top:"10%","z-index":"20001"},attrs:{width:"20%",dismissible:"",elevation:"2",type:e.alert.type,color:e.alert.color,transition:"slide-y-transition"},model:{value:e.alert.show,callback:function(t){e.$set(e.alert,"show",t)},expression:"alert.show"}},[e._v(" "+e._s(e.alert.msg)+" ")]),t(s.Z,[t("router-view")],1)],1)},l=[],c=a(9203),d=a(6629),u=a(7179),m=a(4437),p=a(5057),h=function(){var e=this,t=e._self._c;return t(c.Z,{attrs:{app:"",elevation:"0",dark:"",prominent:""}},[t(m.Z,{attrs:{cols:"4"}}),t(m.Z,{staticClass:"d-flex align-center justify-center",attrs:{cols:"4"}},[t(d.Z,[t("div",{staticClass:"text-capitalize font-weight-light logoCda mt-2"},[e._v(" CARRUSEL DE ACTORES ")])])],1),t(m.Z,{staticClass:"d-flex justify-end mt-4",attrs:{cols:"4"}},e._l(e.social,(function(a){return t(u.Z,{key:a.logo,attrs:{icon:"",elevation:"0",color:"white"}},[t(p.Z,[e._v(e._s(a.logo))])],1)})),1)],1)},g=[],v={name:"NavBar",data:()=>({social:[{logo:"mdi-facebook",link:"https://www.facebook.com/carruseldeactores"},{logo:"mdi-twitter",link:"https://twitter.com/carruselactores"},{logo:"mdi-youtube",link:"https://www.youtube.com/user/FiloQu"}]})},f=v,b=a(1001),y=(0,b.Z)(f,h,g,!1,null,"6dbfe923",null),Z=y.exports,_=a(3058),w=a(5223),k=a(5452),x=a(5294),A=a(3347),E=a(3432),C=function(){var e=this,t=e._self._c;return t(x.Z,{attrs:{justify:"center"}},[t(k.Z,{attrs:{transition:"fade-transition",persistent:"","max-width":"420px"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t(_.Z,{attrs:{tile:""}},[t(w.EB,[t("span",{staticClass:"text-h5"},[e._v("Editar "+e._s(e.actorName))])]),t(w.ZB,e._l(e.options,(function(a,i){return t(m.Z,{key:i},[t(E.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:o}){return[t(u.Z,e._g(e._b({attrs:{block:"",tile:"",outlined:"",elevation:"0","x-large":""},on:{click:function(t){return e.showEditForm(a.button)}}},"v-btn",o,!1),i),[t(p.Z,{staticClass:"mr-2"},[e._v(e._s(a.icon))]),e._v(" "+e._s(a.button)+" ")],1)]}}],null,!0)},[t("span",[e._v(e._s(a.tip))])])],1)})),1),t(w.h7,[t(A.Z),t(u.Z,{staticClass:"mt-n6",attrs:{tile:"",text:""},on:{click:e.closeDialog}},[e._v(" Cerrar ")]),t(A.Z)],1)],1)],1)],1)},$=[];const I="cda_session",F={methods:{saveSession(e){localStorage.setItem(I,JSON.stringify(e))},removeSession(){localStorage.removeItem(I)},isSessionSetted(){return null!=localStorage.getItem(I)},getToken(){return JSON.parse(localStorage.getItem(I))["token"]},addFaceDetection(e){return e.replace("image/upload/","image/upload/c_thumb,g_face,w_650/")}}};var S={profile:"Perfil",experiences:"Experiencias",social:"Redes Sociales",multimedia:"Multimedia"},N={name:"ActorEditDialog",mixins:[F],props:{actorName:{type:String,required:!0},actorId:{type:String,required:!0},showDialog:{type:Boolean,default:!1}},data:()=>({options:{profile:{button:S.profile,icon:"mdi-notebook-outline",tip:"Perfil - Idiomas - Habilidades"},experiences:{button:S.experiences,icon:"mdi-license",tip:"Exp. Profesional - Formación - Premios"},multimedia:{button:S.multimedia,icon:"mdi-camera-outline",tip:"Imágenes - Videos"},social:{button:S.social,icon:"mdi-earth",tip:"Redes Sociales - Página web"}}}),methods:{showEditForm(e){qt.$emit("actorEditionForm_adminPanel_showEditForm",e)},closeDialog(){qt.$emit("adminActions_adminPanel_editActor")}}},P=N,D=(0,b.Z)(P,C,$,!1,null,"6fb2aad8",null),T=D.exports,B={name:"App",components:{LogoBar:Z},data:()=>({alert:{show:!1,color:"",type:null,msg:""}}),created(){qt.$on("alert",(e=>{this.showAlert(e)}))},methods:{showAlert(e){this.alert={color:e.color,type:e.type,msg:e.msg,show:!0},setTimeout((()=>this.alert.show=!1),2200)}}},O=B,j=(0,b.Z)(O,n,l,!1,null,null,null),M=j.exports,U=a(8345),q=function(){var e=this,t=e._self._c;return t(x.Z,{staticClass:"d-flex justify-center"},[t("ActorGallery")],1)},G=[],V=a(2469),Y=a(6275),R=function(){var e=this,t=e._self._c;return t(x.Z,{staticClass:"pa-8"},[e._l(e.actors,(function(a){return e.actors.length>0?[e.showCard(a)?t(m.Z,{key:a._id,staticClass:"d-flex justify-center child-flex"},[t(_.Z,{staticClass:"pa-1",attrs:{outlined:"","max-width":"315px"}},[t(V.Z,{key:a.photo.publicId,staticClass:"grey lighten-2 actorImg align-end",attrs:{src:a.photo.secureUrl,"aspect-ratio":"1"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[t(x.Z,{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[t(Y.Z,{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[t("div",{staticClass:"showName text-center"},[e._v(" "+e._s(a.name)+" ")]),e.admin?t("div",[t("ActorAdminActions",{attrs:{"actor-id":a._id,"actor-name":a.name,"actor-active":a.active}})],1):e._e()])],1)],1):e._e()]:e._e()}))],2)},L=[],z=a(4192),W=function(){var e=this,t=e._self._c;return t("div",[t(_.Z,[t(_.Z,{staticClass:"d-flex justify-lg-space-around pa-2 actionBgColor",attrs:{color:"white"}},[t(u.Z,{staticClass:"mx-1",attrs:{tile:"",out:"",icon:"",width:"33%"},on:{click:function(t){return e.editActor(e.selectedActor)}}},[t(p.Z,[e._v("mdi-pencil-outline")])],1),t(z.Z,{attrs:{vertical:""}}),t(u.Z,{staticClass:"mx-1",attrs:{tile:"",icon:"",width:"33%"},on:{click:function(t){return e.changeActorStatus(e.selectedActor)}}},[t(p.Z,[e._v(e._s(e.selectedActor.active?"mdi-window-close":"mdi-check"))])],1),t(z.Z,{attrs:{vertical:""}}),t(u.Z,{staticClass:"mx-1",attrs:{tile:"",icon:"",width:"33%"},on:{click:function(t){e.deleteDialog=!0}}},[t(p.Z,[e._v("mdi-trash-can-outline")])],1)],1)],1),[t("div",{staticClass:"text-center"},[t(k.Z,{attrs:{width:"500"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[t(_.Z,[t(w.EB,{staticClass:"text-h5 grey lighten-2"},[e._v(" Eliminar el perfil de "+e._s(e.actorName)+"? ")]),t(w.ZB,{staticClass:"mt-3"},[e._v(" Esta acción "),t("b",[e._v("no puede ser revertida")]),e._v(". Si no quieres que se muestre en la página principal, siempre puedes desactivar el perfil. ")]),t(z.Z),t(w.h7,[t(u.Z,{attrs:{color:"black",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v(" Cancelar ")]),t(A.Z),t(u.Z,{attrs:{color:"error",text:""},on:{click:function(t){return e.deleteActor(e.selectedActor)}}},[e._v(" Eliminar ")])],1)],1)],1)],1)]],2)},H=[],J={name:"ActorAdminActions",components:{ActorEditDialog:T},props:{actorActive:{type:Boolean,required:!0},actorName:{type:String,required:!0},actorId:{type:String,required:!0}},data:()=>({deleteDialog:!1,actions:{enable:{},edit:{},delete:{}},selectedActor:{id:"",name:"",active:!1}}),created(){this.selectedActor.id=this.actorId,this.selectedActor.name=this.actorName,this.selectedActor.active=this.actorActive},methods:{editActor(e){qt.$emit("adminActions_adminPanel_editActor",e)},changeActorStatus(e){this.axios.post(`/change-status/${e.id}`).then((e=>{200===e.status&&qt.$emit("alert",{color:"green",type:"success",msg:e.data.message}),this.selectedActor.active=!this.selectedActor.active})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))},deleteActor(e){this.axios.delete(`/delete/${e.id}`).then((e=>{200===e.status&&(qt.$emit("alert",{color:"green",type:"success",msg:e.data.message}),qt.$emit("toActorGallery_reloadGallery"))})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))}}},Q=J,K=(0,b.Z)(Q,W,H,!1,null,"d0221ada",null),X=K.exports,ee={name:"ActorGallery",mixins:[F],components:{ActorAdminActions:X},props:{admin:{type:Boolean,default:!1}},data:()=>({actors:[]}),created(){this.getGallery(),qt.$on("toActorGallery_reloadGallery",this.getGallery)},methods:{getGallery(){this.axios.get("/gallery").then((e=>{this.actors=e.data,this.actors.forEach((e=>{e.photo.url=this.addFaceDetection(e.photo.url),e.photo.secureUrl=this.addFaceDetection(e.photo.secureUrl)}))})).catch((e=>console.log(e)))},showCard(e){return!!this.admin||e.active}}},te=ee,ae=(0,b.Z)(te,R,L,!1,null,"6334c9dd",null),ie=ae.exports,oe={name:"Home",components:{ActorGallery:ie}},re=oe,se=(0,b.Z)(re,q,G,!1,null,null,null),ne=se.exports,le=a(6904),ce=a(5251),de=function(){var e=this,t=e._self._c;return t("div",[t(x.Z,{staticClass:"flexized"},[t(_.Z,{staticClass:"pa-8",attrs:{"max-width":"60vw",elevation:"0",outlined:""}},[[t(le.Z,{ref:"adminForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(ce.Z,{attrs:{"append-icon":"mdi-account",rules:[e=>!!e||"Es necesario indicar un usuario"],label:"Usuario",required:""},model:{value:e.admin.user,callback:function(t){e.$set(e.admin,"user",t)},expression:"admin.user"}}),t(ce.Z,{attrs:{type:e.showPwd?"text":"password","append-icon":e.showPwd?"mdi-eye":"mdi-eye-off",rules:[e=>!!e||"Es necesario indicar una contraseña"],label:"Contraseña",required:""},on:{"click:append":function(t){e.showPwd=!e.showPwd}},model:{value:e.admin.password,callback:function(t){e.$set(e.admin,"password",t)},expression:"admin.password"}}),t("div",{staticClass:"mt-2"},[t(u.Z,{staticClass:"mr-4",attrs:{tile:"",outlined:"",color:"error"},on:{click:e.reset}},[e._v(" Reiniciar ")]),t(u.Z,{attrs:{tile:"",outlined:"",color:"success"},on:{click:e.connect}},[e._v(" Conectar ")])],1)],1)]],2)],1)],1)},ue=[],me=(a(7658),function(){var e=this,t=e._self._c;return t(c.Z,{attrs:{elevation:"0"}},[t(A.Z),t(m.Z,{staticClass:"d-flex justify-center align-center",attrs:{cols:"4"}},[e.newActorInput?e._e():t(u.Z,{attrs:{tile:"",outlined:""},on:{click:function(t){e.newActorInput=!0}}},[e._v(" Añadir Actor ")]),e.newActorInput?t("div",{staticClass:"d-flex justify-center align-center"},[t(u.Z,{staticClass:"mr-2",attrs:{icon:"",small:"",tile:"",outlined:""},on:{click:function(t){e.newActorInput=!1}}},[t(p.Z,[e._v(" mdi-close ")])],1),t(ce.Z,{attrs:{label:"Nombre","hide-details":"auto"},model:{value:e.actorName,callback:function(t){e.actorName=t},expression:"actorName"}}),t(u.Z,{staticClass:"ml-2",attrs:{icon:"",small:"",tile:"",outlined:""},on:{click:e.createNewActor}},[t(p.Z,[e._v(" mdi-check ")])],1)],1):e._e()],1),t(A.Z)],1)}),pe=[],he={name:"AdminBar",data:()=>({newActorInput:!1,actorName:""}),methods:{createNewActor(){this.axios.post("/new",{name:this.actorName}).then((e=>{200===e.status&&(qt.$emit("alert",{color:"green",type:"success",msg:e.data.message}),qt.$emit("toActorGallery_reloadGallery"))})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})})),this.actorName="",this.newActorInput=!1}}},ge=he,ve=(0,b.Z)(ge,me,pe,!1,null,"1d5e8126",null),fe=ve.exports,be={name:"AdminPanel",components:{AdminBar:fe},mixins:[F],data:()=>({showPwd:!1,valid:!0,admin:{user:"",password:""}}),created(){this.isSessionSetted()&&this.$router.push("/cda-admin")},methods:{reset(){this.$refs.adminForm.reset()},connect(){this.$refs.adminForm.validate()&&this.axios.post("/admin/login",this.admin).then((e=>{200===e.status&&(qt.$emit("alert",{color:"green",type:"success",msg:"Credenciales correctas"}),this.isSessionSetted()&&this.removeSession(),this.saveSession(e.data),setTimeout(this.$router.push("/cda-admin"),1e3))})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))}}},ye=be,Ze=(0,b.Z)(ye,de,ue,!1,null,"f156d4e2",null),_e=Ze.exports,we=function(){var e=this,t=e._self._c;return t("div",[t("AdminBar"),t("ActorGallery",{attrs:{admin:""}}),t("ActorEditDialog",{attrs:{"actor-id":e.selectedActor.id,"actor-name":e.selectedActor.name,"show-dialog":e.showEditOptionsDialog}}),t("ActorEditionForm",{attrs:{"show-dialog":e.showActorEditionDialog,"actor-id":e.selectedActor.id,"actor-name":e.selectedActor.name,"edition-type":e.editionFormType}})],1)},ke=[],xe=a(5838),Ae=a(2370),Ee=function(){var e=this,t=e._self._c;return t(x.Z,[t(k.Z,{attrs:{persistent:"",transition:"dialog-bottom-transition","max-width":e.dialogWidthVW},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t(_.Z,{staticStyle:{overflow:"hidden !important"}},[t(xe.Z,{attrs:{dark:"",color:"dark"}},[t(u.Z,{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[t(p.Z,[e._v("mdi-close")])],1),t(Ae.qW,[e._v("Editar "+e._s(e.editionType.toLowerCase())+" de "+e._s(e.actorName))]),t(A.Z),t(Ae.lj,[t(u.Z,{attrs:{dark:"",text:"",tile:""},on:{click:e.save}},[t(p.Z,{staticClass:"mr-2",attrs:{dense:""}},[e._v("mdi-content-save-outline")]),e._v(" Guardar ")],1)],1)],1),e.editionType===e.EditOptions.profile?t("ActorEditProfile",{attrs:{"actor-id":e.actorId}}):e._e(),e.editionType===e.EditOptions.social?t("ActorEditSocial",{attrs:{"actor-id":e.actorId}}):e._e(),e.editionType===e.EditOptions.experiences?t("ActorEditBackground",{attrs:{"actor-id":e.actorId}}):e._e(),e.editionType===e.EditOptions.multimedia?t("ActorEditMultimedia",{attrs:{"actor-id":e.actorId}}):e._e()],1)],1)],1)},Ce=[],$e=a(6938),Ie=a(248),Fe=a(1908),Se=a(7621),Ne=a(2680),Pe=function(){var e=this,t=e._self._c;return t(x.Z,[t(m.Z,[t(Ie.Z,{attrs:{subheader:""}},[t(Ne.Z,{staticClass:"mt-4"},[t(p.Z,{staticClass:"mr-4"},[e._v("mdi-notebook-outline")]),e._v(" INFORMACIÓN PRINCIPAL "),t("span",{staticClass:"caption ml-4"},[e._v("(Los campos que no se rellenen, no saldrán en la ficha)")])],1)],1),t(z.Z),t(Ie.Z,e._l(e.profile,(function(a){return t(Fe.Z,{key:a.text},["text"===a.type?t(ce.Z,{attrs:{"prepend-icon":a.icon,label:a.label},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"input.value"}}):e._e(),"combobox"===a.type?t($e.Z,{attrs:{"prepend-icon":a.icon,label:a.label,multiple:"",chips:""},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"input.value"}}):e._e(),"select"===a.type?t(Se.Z,{attrs:{"prepend-icon":a.icon,label:a.label,items:a.items,chips:a.chips,multiple:a.multiple},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"input.value"}}):e._e()],1)})),1)],1)],1)},De=[],Te={name:"ActorEditProfile",props:{actorId:{type:String,required:!0}},watch:{actorId:{handler:function(){this.retrieveProfileInfo()}}},created(){this.retrieveProfileInfo(),qt.$on("actorEditionForm_actorEditProfile_save",this.save)},methods:{save(){const e={};for(let t in this.profile)null!=this.profile[t].value&&(e[t]=this.profile[t].value);e.name.length<1&&Object.keys(e).length<1?qt.$emit("alert",{color:"red",type:"error",msg:"El perfil no puede estar vacío"}):qt.$emit("toActorEditionForm_save",e)},retrieveProfileInfo(){this.axios.get(`/profile/retrieve/${this.actorId}`).then((e=>{for(let t in this.profile)this.profile[t].value=e.data[t]})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))}},data:()=>({profile:{name:{label:"Nombre",icon:"mdi-form-textbox",type:"text",value:null},age:{label:"Edad",icon:"mdi-cake-variant-outline",type:"text",value:null},hair:{label:"Cabello",icon:"mdi-hair-dryer-outline",type:"text",value:null},eyes:{label:"Ojos",icon:"mdi-eye-outline",type:"text",value:null},height:{label:"Altura",icon:"mdi-human-male-height",type:"text",value:null},languages:{label:"Idiomas",icon:"mdi-account-voice",type:"combobox",value:null},skills:{label:"Habilidades",icon:"mdi-drama-masks",type:"combobox",value:null},sex:{label:"Sexo (Se utilizará para filtrar en página principal)",icon:"mdi-human",type:"select",chips:!1,multiple:!1,items:["Hombre","Mujer","Otros","Sin indicar"],value:null}}})},Be=Te,Oe=(0,b.Z)(Be,Pe,De,!1,null,"12b6690a",null),je=Oe.exports,Me=a(2755),Ue=a(1769),qe=a(8228),Ge=a(5787),Ve=a(3333),Ye=a(2237),Re=function(){var e=this,t=e._self._c;return t(x.Z,[t(m.Z,[t(Ie.Z,[t(Ye.Z,{staticClass:"mt-1",attrs:{"fixed-tabs":"","hide-slider":""}},e._l(e.backgrounds,(function(a,i){return t(Ve.Z,{key:a.name,staticClass:"mb-2",class:{active:e.activeTab===i},on:{click:function(t){return e.changeActiveTab(i)}}},[t(Ne.Z,{staticClass:"mt-2"},[e.activeTab===i?t(p.Z,{staticClass:"mr-4"},[e._v(" "+e._s(a.icon)+" ")]):e._e(),e._v(" "+e._s(a.name)+" "),t(E.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:r}){return[t("div",e._g(e._b({},"div",r,!1),o),[e.activeTab===i?t(Ge.Z,{staticClass:"ml-4",attrs:{color:"grey darken-3"},model:{value:a.active,callback:function(t){e.$set(a,"active",t)},expression:"bg.active"}}):e._e()],1)]}}],null,!0)},[t("span",[e._v(e._s(a.active?"Desactivar":"Activar"))])])],1)],1)})),1)],1),t(z.Z),t(Ie.Z,{attrs:{subheader:""}},[t(x.Z,{staticClass:"px-6"},[t(m.Z,{attrs:{cols:"5"}},[t(ce.Z,{attrs:{"prepend-icon":"mdi-calendar-range",label:e.labels.date},model:{value:e.newBg.date,callback:function(t){e.$set(e.newBg,"date",t)},expression:"newBg.date"}})],1),t(m.Z,{attrs:{cols:"6"}},[t(ce.Z,{attrs:{"prepend-icon":"mdi-information-outline",label:e.labels.exp},model:{value:e.newBg.exp,callback:function(t){e.$set(e.newBg,"exp",t)},expression:"newBg.exp"}})],1),t(m.Z,{staticClass:"d-flex justify-center align-center"},[t(u.Z,{attrs:{small:"",icon:"",outlined:""},on:{click:function(t){return e.addNewData(e.activeTab)}}},[t(p.Z,[e._v(" mdi-plus ")])],1)],1)],1)],1),e.backgrounds[e.activeTab].values.length>0?t(Ie.Z,[t(z.Z),e._l(e.backgrounds[e.activeTab].values,(function(a,i){return t(Fe.Z,{key:a.exp},[t(qe.Z,[t(p.Z,{staticClass:"ml-4 mt-1"},[e._v(e._s(e.backgrounds[e.activeTab].icon))])],1),t(Ue.km,[t(Ue.V9,[e._v(e._s(a.exp))]),t(Ue.oZ,[e._v(e._s(a.date))])],1),t(Me.Z,[t(u.Z,{staticClass:"mt-2",attrs:{small:"",icon:"",outlined:""},on:{click:function(t){return e.removeExperience(e.activeTab,i)}}},[t(p.Z,[e._v(" mdi-close ")])],1)],1)],1)}))],2):e._e()],1)],1)},Le=[],ze={name:"ActorEditBackground",data:()=>({activeTab:0,newBg:{date:"",exp:""},labels:{date:"",exp:""},backgrounds:[{schemaName:"formation",name:"Formación",icon:"mdi-school",active:!1,values:[]},{schemaName:"experience",name:"Experiencia Profesional",icon:"mdi-movie-open",active:!1,values:[]},{schemaName:"awards",name:"Premios",icon:"mdi-trophy-award",active:!1,values:[]}]}),props:{actorId:{type:String,required:!0}},watch:{actorId:{handler:function(){this.retrieveBackgroundInfo()}}},methods:{save(){const e={background:{}};this.backgrounds.forEach((t=>{t.values.length>0&&(e.background[t.schemaName]={values:t.values,active:t.active})})),Object.keys(e).length<1?qt.$emit("alert",{color:"red",type:"error",msg:"No se ha añadido ninguna experiencia"}):qt.$emit("toActorEditionForm_save",e)},addNewData(e){this.backgrounds[e].values.push(this.newBg),this.changeActiveTab(e)},removeExperience(e,t){this.backgrounds[e].values.splice(t,1)},changeActiveTab(e){this.labels={date:"Fecha de "+this.backgrounds[e].name.toLowerCase(),exp:this.backgrounds[e].name},this.newBg={date:"",exp:""},this.activeTab=e},retrieveBackgroundInfo(){this.axios.get(`/experience/retrieve/${this.actorId}`).then((e=>{this.backgrounds.forEach((t=>{t.active=e.data.background[t.schemaName].active,t.values=e.data.background[t.schemaName].values}))})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))}},created(){this.changeActiveTab(0),this.retrieveBackgroundInfo(),qt.$on("actorEditionForm_actorEditBackground_save",this.save)}},We=ze,He=(0,b.Z)(We,Re,Le,!1,null,"128ea1c9",null),Je=He.exports,Qe=function(){var e=this,t=e._self._c;return t(x.Z,[t(m.Z,[t(Ie.Z,{attrs:{subheader:""}},[t(Ne.Z,{staticClass:"mt-4"},[t(p.Z,{staticClass:"mr-4"},[e._v("mdi-earth")]),e._v(" REDES SOCIALES ")],1)],1),t(z.Z),t(Ie.Z,[t(Fe.Z,[t($e.Z,{attrs:{label:"Redes disponibles",items:e.allNetworksForCombo,multiple:"",chips:"","hide-selected":""},on:{change:e.addNetwork},model:{value:e.selectedNetworkNames,callback:function(t){e.selectedNetworkNames=t},expression:"selectedNetworkNames"}})],1),e._l(e.actorNetworks,(function(a){return t(Fe.Z,{key:a.name},[t(ce.Z,{attrs:{"prepend-icon":a.icon,label:"Direccion de "+a.name,"append-outer-icon":"mdi-close-circle"},on:{"click:append-outer":function(t){return e.clearNetwork(a.name)}},model:{value:a.url,callback:function(t){e.$set(a,"url",t)},expression:"net.url"}})],1)}))],2)],1)],1)},Ke=[],Xe={name:"ActorEditSocial",props:{actorId:{type:String,required:!0}},watch:{actorId:{handler:function(){this.retrieveSocialInfo()}}},data:()=>({theActorId:"",allNetworksForCombo:["Twitter","Youtube","Instagram","Facebook","Web"],selectedNetworkNames:[],allNetworks:[{name:"Twitter",icon:"mdi-twitter",url:""},{name:"Youtube",icon:"mdi-youtube",url:""},{name:"Instagram",icon:"mdi-instagram",url:""},{name:"Facebook",icon:"mdi-facebook",url:""},{name:"Web",icon:"mdi-earth",url:""}],actorNetworks:[]}),created(){this.retrieveSocialInfo(),qt.$on("actorEditionForm_actorEditSocial_save",this.save)},methods:{save(){this.actorNetworks.length<1?qt.$emit("alert",{color:"red",type:"error",msg:"Debes indicar al menos una red"}):qt.$emit("toActorEditionForm_save",{media:this.actorNetworks})},clearNetwork(e){this.actorNetworks=this.actorNetworks.filter((t=>t.name!==e)),this.selectedNetworkNames=this.selectedNetworkNames.filter((t=>t!==e))},retrieveSocialInfo(){this.actorNetworks=[],this.selectedNetworkNames=[],this.axios.get(`/social/retrieve/${this.actorId}`).then((e=>{e.data.media.forEach((e=>{this.selectedNetworkNames.push(e.name),this.actorNetworks.push(e)}))})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))},addNetwork(e){e.forEach((e=>{this.actorNetworks.some((t=>t.name===e))||this.actorNetworks.push(this.allNetworks.find((t=>{if(t.name===e)return t})))})),this.actorNetworks=this.actorNetworks.filter((t=>{if(e.includes(t.name))return t}))}}},et=Xe,tt=(0,b.Z)(et,Qe,Ke,!1,null,"0dccde04",null),at=tt.exports,it=function(){var e=this,t=e._self._c;return t(x.Z,[t(m.Z,[t(Ie.Z,[t(Ye.Z,{staticClass:"mt-1",attrs:{grow:"","hide-slider":""}},e._l(e.multimedia,(function(a,i){return t(Ve.Z,{key:i,staticClass:"mb-2",on:{click:function(t){return e.changeActiveTab(i)}}},[t(Ne.Z,{staticClass:"mt-2"},[t(p.Z,{staticClass:"mr-4"},[e._v(" "+e._s(a.icon)+" ")]),e._v(" "+e._s(a.name)+" ")],1)],1)})),1)],1),t(Ie.Z,["photos"===e.activeTab?t("PhotoUploadEdition",{attrs:{"actor-id":e.actorId}}):e._e(),"videos"===e.activeTab?t("VideoUploadEdition",{attrs:{"actor-id":e.actorId}}):e._e()],1)],1)],1)},ot=[],rt=a(271),st=function(){var e=this,t=e._self._c;return t("div",[t(x.Z,{staticClass:"px-6"},[t(m.Z,{attrs:{cols:"5"}},[t(ce.Z,{attrs:{"prepend-icon":"mdi-format-text",label:"Título de archivo",rules:e.titleRule},model:{value:e.newMultimedia.name,callback:function(t){e.$set(e.newMultimedia,"name",t)},expression:"newMultimedia.name"}})],1),t(m.Z,{attrs:{cols:"6"}},[t(rt.Z,{attrs:{label:"Archivo",loading:e.uploading,accept:"image/png, image/jpeg, image/bmp"},model:{value:e.newMultimedia.file,callback:function(t){e.$set(e.newMultimedia,"file",t)},expression:"newMultimedia.file"}})],1),t(m.Z,{staticClass:"d-flex justify-center align-center"},[t(u.Z,{attrs:{icon:"",outlined:""},on:{click:function(t){return e.addFile(e.newMultimedia.file)}}},[t(p.Z,[e._v(" mdi-upload ")])],1)],1)],1),t(x.Z,{staticClass:"px-6"},e._l(e.photos,(function(a){return t(m.Z,{key:a.publicId,staticClass:"d-flex justify-center"},[t(_.Z,{staticClass:"pa-1",attrs:{outlined:"",width:"200px"}},[t(V.Z,{staticClass:"grey lighten-2 actorImg align-end",attrs:{src:a.secureUrl,"aspect-ratio":"1"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[t(x.Z,{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[t(Y.Z,{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[t(w.h7,{staticClass:"d-flex justify-center align-center"},[t(u.Z,{attrs:{"x-small":"",tile:"",color:"teal lighten-3",disabled:a.main},on:{click:function(t){return e.changeMainImage(a.publicId)}}},[t(p.Z,[e._v(" mdi-check ")])],1),t(u.Z,{attrs:{"x-small":"",tile:"",color:"deep-orange lighten-3",disabled:a.main},on:{click:function(t){return e.deleteImage(a.publicId)}}},[t(p.Z,[e._v(" mdi-close ")])],1)],1)],1),t(w.Qq,[t("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"150px"}},[e._v(" "+e._s(a.title)+" ")])])],1)],1)})),1)],1)},nt=[],lt={name:"PhotoUploadEdition",mixins:[F],props:{actorId:{type:String,required:!0}},watch:{actorId:{handler:function(){this.retrieveImages()}}},data:()=>({titleRule:[e=>new RegExp(/^[a-zA-Z0-9\s]*$/).test(e)||"El título solo puede contener: Letras, números y espacios"],photos:[],newMultimedia:null,uploading:!1}),created(){this.initMultimedia(),this.retrieveImages()},methods:{addFile(e){if(null==e||this.newMultimedia.name.length<1)return void qt.$emit("alert",{color:"red",type:"error",msg:"Debes especificar un archivo y un título"});if(!new RegExp(/^[a-zA-Z0-9\s]*$/).test(this.newMultimedia.name))return void qt.$emit("alert",{color:"red",type:"error",msg:"El título del archivo solo puede contener: Letras, números y espacios"});this.uploading=!0;const t=new FormData;t.append("cda_file",e),this.newMultimedia.file=t,this.axios.post(`/upload/photos/${this.actorId}/${this.newMultimedia.name}`,this.newMultimedia.file).then((e=>{qt.$emit("alert",{color:"green",type:"success",msg:e.data.message}),e.data.firstImage&&qt.$emit("toActorGallery_reloadGallery")})).catch((e=>{500===e.response.status?qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message}):(console.log(e),qt.$emit("alert",{color:"red",type:"error",msg:"Ha ocurrido un error al subir el archivo"}))})).finally((()=>{this.uploading=!1,this.initMultimedia(),this.retrieveImages()}))},retrieveImages(){this.axios.get(`/images/retrieve/${this.actorId}`).then((e=>{this.photos=e.data.photos,console.log(this.photos),this.photos.forEach((e=>{console.log("hey"),e.url=this.addFaceDetection(e.url),e.secureUrl=this.addFaceDetection(e.secureUrl)}))})).catch((e=>{console.log(e),qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))},changeMainImage(e){this.axios.post(`/images/main/${this.actorId}/${e}`).then((e=>{200===e.status&&qt.$emit("alert",{color:"green",type:"success",msg:e.data.message}),this.retrieveImages(),qt.$emit("toActorGallery_reloadGallery")})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))},deleteImage(e){this.axios.delete(`/images/delete/${this.actorId}/${e}`).then((e=>{200===e.status&&qt.$emit("alert",{color:"green",type:"success",msg:e.data.message}),this.retrieveImages()})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))},initMultimedia(){this.newMultimedia={source:"",name:"",file:null}}}},ct=lt,dt=(0,b.Z)(ct,st,nt,!1,null,"103d4abc",null),ut=dt.exports,mt=function(){var e=this,t=e._self._c;return t("div",[t(x.Z,{staticClass:"px-6"},[t(m.Z,{attrs:{cols:"10"}},[e.upYoutube?t(ce.Z,{attrs:{"prepend-icon":"mdi-youtube",label:"Enlace de YouTube"},model:{value:e.ytUrl,callback:function(t){e.ytUrl=t},expression:"ytUrl"}}):t(rt.Z,{attrs:{"prepend-icon":"mdi-file-video-outline",loading:e.uploading,label:"Subir a Carrusel de Actores"},model:{value:e.cdaFile,callback:function(t){e.cdaFile=t},expression:"cdaFile"}})],1),t(m.Z,[t(E.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t("div",e._g(e._b({},"div",i,!1),a),[t(Ge.Z,{staticClass:"ml-4",attrs:{color:"grey darken-3"},model:{value:e.upYoutube,callback:function(t){e.upYoutube=t},expression:"upYoutube"}})],1)]}}])},[t("span",[e._v(e._s(e.upYoutube?"Usar Youtube":"Subir a CDA"))])])],1),t(m.Z,{staticClass:"d-flex justify-center align-center"},[t(u.Z,{attrs:{icon:"",outlined:""},on:{click:function(t){return e.newVideo()}}},[t(p.Z,[e._v(" "+e._s(e.upYoutube?"mdi-content-save":"mdi-upload")+" ")])],1)],1)],1),t(x.Z,{staticClass:"pa-2"},e._l(e.vids,(function(a,i){return t(m.Z,{key:i,staticClass:"d-flex justify-center"},[t("div",[e.isYt(a)?t("youtube",{attrs:{"video-id":a,"player-width":"320","player-height":"180"}}):e._e(),t(u.Z,{staticClass:"mt-n1",attrs:{block:"",elevation:"0",small:"",color:"deep-orange lighten-1"},on:{click:function(t){return e.deleteVideo(a)}}},[t(p.Z,[e._v(" mdi-trash-can-outline ")]),e._v(" Eliminar ")],1)],1)])})),1)],1)},pt=[],ht=a(5684),gt={name:"VideoUploadEdition",data:()=>({ytUrl:"",cdaFile:null,uploading:!1,upYoutube:!0,vids:[]}),created(){this.retrieveVideos()},methods:{newVideo(){this.upYoutube?this.addYoutubeVideo(this.ytUrl):this.addCdaVideo()},addYoutubeVideo(e){this.ytUrl="";const t=(0,ht.J)(e);t&&e.toLowerCase().includes("youtube")?this.vids.includes(t)?qt.$emit("alert",{color:"red",type:"error",msg:"El video ya ha sido añadido anteriormente"}):(this.vids.push(t),qt.$emit("toActorEditionForm_save",{videos:this.vids})):qt.$emit("alert",{color:"red",type:"error",msg:"Video de YouTube no válido"})},deleteVideo(e){const t=this.vids.indexOf(e);this.isYt(e)&&t>-1&&(this.vids.splice(t,1),qt.$emit("toActorEditionForm_save",{videos:this.vids}))},addCdaVideo(){},retrieveVideos(){this.axios.get(`/videos/retrieve/${this.actorId}`).then((e=>{this.vids=e.data.videos})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))},isYt(e){return"string"===typeof e}},props:{actorId:{type:String,required:!0}},watch:{actorId:{handler:function(){this.retrieveVideos()}}}},vt=gt,ft=(0,b.Z)(vt,mt,pt,!1,null,"70dafbcc",null),bt=ft.exports,yt={name:"ActorEditMultimedia",components:{VideoUploadEdition:bt,PhotoUploadEdition:ut},data:()=>({activeTab:null,multimedia:{photos:{name:"Imágenes",icon:"mdi-camera"},videos:{name:"Videos",icon:"mdi-filmstrip"}},sources:[{name:"Youtube",icon:"mdi-youtube"},{name:"CDA",icon:"mdi-filmstrip"}]}),created(){this.activeTab="photos"},methods:{changeActiveTab(e){this.activeTab=e}},props:{actorId:{type:String,required:!0}},watch:{actorId:{handler:function(){this.retrieveImages()}}}},Zt=yt,_t=(0,b.Z)(Zt,it,ot,!1,null,"d9b6f248",null),wt=_t.exports,kt={name:"ActorEditionForm",computed:{EditOptions(){return S}},components:{ActorEditMultimedia:wt,ActorEditSocial:at,ActorEditBackground:Je,ActorEditProfile:je},props:{actorName:{type:String,required:!0},actorId:{type:String,required:!0},showDialog:{type:Boolean,default:!1},editionType:{type:String,required:!0}},created(){this.resizeDialog(window.innerWidth),window.addEventListener("resize",(()=>{this.resizeDialog(window.innerWidth)})),qt.$on("toActorEditionForm_save",(e=>{this.axios.post(`/update/${this.actorId}`,e).then((t=>{200===t.status&&(qt.$emit("alert",{color:"green",type:"success",msg:t.data.message}),e.hasOwnProperty("name")?qt.$emit("toAdminPanel_updateActorCloseDialogs",e.name):e.hasOwnProperty("videos")?qt.$emit("toAdminPanel_updateActorCloseDialogs","noClose"):qt.$emit("toAdminPanel_updateActorCloseDialogs"))})).catch((e=>{qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message})}))}))},data:()=>({dialogWidthVW:"55vw"}),methods:{save(){switch(this.editionType){case S.profile:qt.$emit("actorEditionForm_actorEditProfile_save");break;case S.experiences:qt.$emit("actorEditionForm_actorEditBackground_save");break;case S.social:qt.$emit("actorEditionForm_actorEditSocial_save");break}},resizeDialog(e){this.dialogWidthVW=e<1250?"95vw":"55vw"},closeDialog(){qt.$emit("actorEditionForm_adminPanel_showEditForm")}}},xt=kt,At=(0,b.Z)(xt,Ee,Ce,!1,null,"5a34dd30",null),Et=At.exports,Ct={name:"AdminPanel",mixins:[F],components:{ActorEditDialog:T,AdminBar:fe,ActorGallery:ie,ActorEditionForm:Et},data:()=>({isAdmin:!0,showEditOptionsDialog:!1,showActorEditionDialog:!1,editionFormType:"",selectedActor:{id:"",name:""}}),created(){this.checkAdmin(),qt.$on("adminActions_adminPanel_editActor",(e=>{e?(this.selectedActor=e,this.showEditOptionsDialog=!0):this.showEditOptionsDialog=!1})),qt.$on("actorEditionForm_adminPanel_showEditForm",(e=>{e?(this.showActorEditionDialog=!0,this.editionFormType=e):this.showActorEditionDialog=!1})),qt.$on("toAdminPanel_updateActorCloseDialogs",(e=>{null!=e&&"noClose"!==e&&(this.selectedActor.name=e),"noClose"!==e&&(this.showActorEditionDialog=!1),qt.$emit("toActorGallery_reloadGallery")}))},methods:{async checkAdmin(){this.axios.get("/admin/check").then((e=>{e.data.admin||this.$router.push("/")})).catch((e=>{this.removeSession(),qt.$emit("alert",{color:"red",type:"error",msg:e.response.data.message}),this.$router.push("/")}))}}},$t=Ct,It=(0,b.Z)($t,we,ke,!1,null,"00403350",null),Ft=It.exports;i.ZP.use(U.ZP);const St=[{path:"/",name:"home",component:ne},{path:"/cda-admin",name:"admin-panel",meta:{admin:!0},component:Ft},{path:"/cda-admin/login",name:"admin-login",component:_e}],Nt=new U.ZP({mode:"history",base:"/",routes:St});Nt.beforeEach(((e,t,a)=>{const i=JSON.parse(localStorage.getItem("cda_session"));e.meta.admin&&(null!=i&&i["token"]&&i["id"]?a():a("/")),a()}));var Pt=Nt,Dt=a(629);i.ZP.use(Dt.ZP);var Tt=new Dt.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),Bt=a(2250);i.ZP.use(Bt.Z);var Ot=new Bt.Z({theme:{options:{customProperties:!0},themes:{dark:{primary:"#127475",secondary:"#ABFF4F",error:"#F2542D",info:"#0E9594",success:"#29BF12",warning:"#FF9914",col1:"#e3d5ca",col2:"#E0AFA0",col3:"#F4F3EE",col4:"#BCB8B1",col5:"#e9ecef",col6:"#463F3A"},light:{primary:"#127475",secondary:"#ABFF4F",error:"#F2542D",info:"#0E9594",success:"#29BF12",warning:"#FF9914",col1:"#e3d5ca",col2:"#E0AFA0",col3:"#F4F3EE",col4:"#BCB8B1",col5:"#fbfefb",col6:"#463F3A"}}}}),jt=a(8945),Mt=a(2346);i.ZP.use(Mt.Z,jt.Z),i.ZP.use(ht.ZP),i.ZP.config.productionTip=!1,jt.Z.defaults.baseURL="http://localhost:3000/api";const Ut="cda_session";jt.Z.interceptors.request.use((async e=>{const t=JSON.parse(localStorage.getItem(Ut));return e.headers=t?{"x-access-token":t["token"],"cda-id":t["id"],Accept:"application/json"}:{Accept:"application/json"},e}),(e=>{Promise.reject(e)}));const qt=new i.ZP;new i.ZP({router:Pt,store:Tt,vuetify:Ot,render:e=>e(M)}).$mount("#app")}},t={};function a(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i](r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,o,r){if(!i){var s=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],r=e[d][2];for(var n=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(n=!1,r<s&&(s=r));if(n){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,s=i[0],n=i[1],l=i[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(l)var d=l(a)}for(t&&t(i);c<s.length;c++)r=s[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},i=self["webpackChunkcda2"]=self["webpackChunkcda2"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(9813)}));i=a.O(i)})();
//# sourceMappingURL=app.f01212bc.js.map