{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getIdFromURL } from \"vue-youtube-embed\";\nimport { EventBus } from \"@/main\";\nexport default {\n  name: \"VideoUploadEdition\",\n  data: () => ({\n    ytUrl: '',\n    cdaFile: null,\n    uploading: false,\n    upYoutube: true,\n    vids: []\n  }),\n  created() {\n    this.retrieveVideos();\n  },\n  methods: {\n    newVideo() {\n      if (this.upYoutube) this.addYoutubeVideo(this.ytUrl);else this.addCdaVideo();\n    },\n    addYoutubeVideo(ytUrl) {\n      this.ytUrl = \"\";\n      const ytId = getIdFromURL(ytUrl);\n      if (!ytId || !ytUrl.toLowerCase().includes('youtube')) {\n        EventBus.$emit('alert', {\n          color: 'red',\n          type: 'error',\n          msg: 'Video de YouTube no v치lido'\n        });\n        return;\n      }\n      if (this.vids.includes(ytId)) {\n        EventBus.$emit('alert', {\n          color: 'red',\n          type: 'error',\n          msg: 'El video ya ha sido a침adido anteriormente'\n        });\n        return;\n      }\n      this.vids.push(ytId);\n      EventBus.$emit('toActorEditionForm_save', {\n        videos: this.vids\n      });\n    },\n    addCdaVideo() {},\n    retrieveVideos() {\n      this.axios.get(`/videos/retrieve/${this.actorId}`).then(res => {\n        this.vids = res.data.videos;\n      }).catch(e => {\n        EventBus.$emit('alert', {\n          color: 'red',\n          type: 'error',\n          msg: e.response.data.message\n        });\n      });\n    },\n    isYt(obj) {\n      return typeof obj === 'string';\n    }\n  },\n  props: {\n    actorId: {\n      type: String,\n      required: true\n    }\n  },\n  watch: {\n    actorId: {\n      handler: function () {\n        this.retrieveVideos();\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AAmFA;AACA;AAEA;EACAA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA,0DACA;IACA;IACAC;MACA;MACA;MACA;QACAC;UACAC;UACAC;UACAC;QACA;QACA;MACA;MAEA;QACAH;UACAC;UACAC;UACAC;QACA;QACA;MACA;MAEA;MAEAH;QACAI;MACA;IACA;IACAC,eAEA;IACAC;MACA,WACAC,wCACAC;QACA;MACA,GACAC;QACAT;UACAC;UACAC;UACAC;QACA;MACA;IACA;IACAO;MACA;IACA;EACA;EACAC;IACAC;MACAV;MACAW;IACA;EACA;EACAC;IACAF;MACAG;QACA;MACA;IACA;EACA;AACA","names":["name","data","ytUrl","cdaFile","uploading","upYoutube","vids","created","methods","newVideo","addYoutubeVideo","EventBus","color","type","msg","videos","addCdaVideo","retrieveVideos","get","then","catch","isYt","props","actorId","required","watch","handler"],"sourceRoot":"src/components/forms","sources":["VideoUploadEdition.vue"],"sourcesContent":["<template>\n  <div>\n    <v-row class=\"px-6\">\n      <v-col cols=\"10\">\n        <v-text-field\n            v-if=upYoutube\n            prepend-icon=\"mdi-youtube\"\n            label=\"Enlace de YouTube\"\n            v-model=\"ytUrl\"\n        ></v-text-field>\n        <v-file-input\n            v-else\n            prepend-icon=\"mdi-file-video-outline\"\n            :loading=\"uploading\"\n            label=\"Subir a Carrusel de Actores\"\n            v-model=\"cdaFile\"\n        ></v-file-input>\n      </v-col>\n      <v-col>\n        <v-tooltip\n            bottom\n        >\n          <template v-slot:activator=\"{ on, attrs }\">\n            <div\n                v-bind=\"attrs\"\n                v-on=\"on\"\n            >\n              <v-switch\n                  class=\"ml-4\"\n                  color=\"grey darken-3\"\n                  v-model=\"upYoutube\"\n              ></v-switch>\n            </div>\n          </template>\n          <span>{{ upYoutube?'Usar Youtube':'Subir a CDA' }}</span>\n        </v-tooltip>\n      </v-col>\n      <v-col\n          class=\"d-flex justify-center align-center\"\n      >\n        <v-btn\n            icon\n            outlined\n            @click=newVideo()\n        >\n          <v-icon>\n            {{ upYoutube?'mdi-content-save':'mdi-upload'}}\n          </v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n    <v-row class=\"pa-2\">\n      <v-col\n          v-for=\"(vid, i) in vids\"\n          class=\"d-flex justify-center\"\n          :key=\"i\"\n      >\n          <div>\n            <youtube\n                v-if=isYt(vid)\n                :video-id=vid\n                player-width=\"320\"\n                player-height=\"180\"\n            />\n              <v-btn\n                  block\n                  elevation=\"0\"\n                  small\n                  color=\"deep-orange lighten-1\"\n                  class=\"mt-n1\"\n              >\n                <v-icon>\n                  mdi-trash-can-outline\n                </v-icon>\n                Eliminar\n              </v-btn>\n          </div>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport {getIdFromURL} from \"vue-youtube-embed\";\nimport {EventBus} from \"@/main\";\n\nexport default {\n  name: \"VideoUploadEdition\",\n  data: () => ({\n    ytUrl: '',\n    cdaFile: null,\n    uploading: false,\n    upYoutube: true,\n    vids: [],\n  }),\n  created() {\n    this.retrieveVideos();\n  },\n  methods: {\n    newVideo(){\n      if (this.upYoutube) this.addYoutubeVideo(this.ytUrl);\n      else this.addCdaVideo();\n    },\n    addYoutubeVideo(ytUrl){\n      this.ytUrl = \"\";\n      const ytId = getIdFromURL(ytUrl);\n      if (!ytId || !ytUrl.toLowerCase().includes('youtube')){\n        EventBus.$emit('alert',{\n          color: 'red',\n          type: 'error',\n          msg: 'Video de YouTube no v치lido'\n        });\n        return;\n      }\n\n      if (this.vids.includes(ytId)){\n        EventBus.$emit('alert',{\n          color: 'red',\n          type: 'error',\n          msg: 'El video ya ha sido a침adido anteriormente'\n        });\n        return;\n      }\n\n      this.vids.push(ytId)\n\n      EventBus.$emit('toActorEditionForm_save',{\n          videos: this.vids\n      });\n    },\n    addCdaVideo(){\n\n    },\n    retrieveVideos(){\n      this.axios\n          .get(`/videos/retrieve/${this.actorId}`)\n          .then( res => {\n            this.vids = res.data.videos;\n          })\n          .catch( e => {\n            EventBus.$emit('alert',{\n              color: 'red',\n              type: 'error',\n              msg: e.response.data.message\n            });\n          });\n    },\n    isYt(obj){\n      return (typeof obj === 'string');\n    }\n  },\n  props: {\n    actorId: {\n      type: String,\n      required: true\n    }\n  },\n  watch: {\n    actorId: {\n      handler: function () {\n        this.retrieveVideos();\n      }\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}