{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { EventBus } from \"@/main\";\nimport { mixins } from \"../../mixins\";\nimport ActorGallery from \"@/components/ActorGallery.vue\";\nimport AdminBar from \"@/components/AdminBar.vue\";\nimport ActorEditDialog from \"@/components/ActorEditDialog.vue\";\nimport ActorEditionForm from \"@/components/ActorEditionForm.vue\";\nexport default {\n  name: \"AdminPanel\",\n  mixins: [mixins],\n  components: {\n    ActorEditDialog,\n    AdminBar,\n    ActorGallery,\n    ActorEditionForm\n  },\n  data: () => ({\n    isAdmin: true,\n    showEditOptionsDialog: false,\n    showActorEditionDialog: false,\n    editionFormType: '',\n    selectedActor: {\n      id: '',\n      name: ''\n    }\n  }),\n  created() {\n    this.checkAdmin();\n    EventBus.$on('adminActions_adminPanel_editActor', selectedActor => {\n      if (selectedActor) {\n        this.selectedActor = selectedActor;\n        this.showEditOptionsDialog = true;\n      } else {\n        this.showEditOptionsDialog = false;\n      }\n    });\n    EventBus.$on('actorEditionForm_adminPanel_showEditForm', option => {\n      if (option) {\n        this.showActorEditionDialog = true;\n        this.editionFormType = option;\n      } else {\n        this.showActorEditionDialog = false;\n      }\n    });\n    EventBus.$on('toAdminPanel_updateActorCloseDialogs', actorName => {\n      if (actorName != null) this.selectedActor.name = actorName;\n      if (actorName !== 'noClose') this.showActorEditionDialog = false;\n      EventBus.$emit('toActorGallery_reloadGallery');\n    });\n  },\n  methods: {\n    async checkAdmin() {\n      this.axios.get(`/admin/check`).then(res => {\n        if (!res.data.admin) this.$router.push(`/`);\n      }).catch(e => {\n        this.removeSession();\n        EventBus.$emit('alert', {\n          color: 'red',\n          type: 'error',\n          msg: e.response.data.message\n        });\n        this.$router.push(`/`);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAyBA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;EACAC;IAAAC;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;MACAC;MACAb;IACA;EACA;EACAc;IACA;IAEAC,kDACAH;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IAEAG,yDACAC;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IAEAD,qDACAE;MACA;MACA;MACAF;IACA;EAEA;EACAG;IACA;MACA,WACAC,oBACAC;QACA;MACA,GACAC;QACA;QACAN;UACAO;UACAC;UACAC;QACA;QACA;MACA;IACA;EACA;AACA","names":["name","mixins","components","ActorEditDialog","AdminBar","ActorGallery","ActorEditionForm","data","isAdmin","showEditOptionsDialog","showActorEditionDialog","editionFormType","selectedActor","id","created","EventBus","option","actorName","methods","get","then","catch","color","type","msg"],"sourceRoot":"src/views","sources":["AdminPanel.vue"],"sourcesContent":["<template>\n  <div>\n    <AdminBar></AdminBar>\n    <ActorGallery admin></ActorGallery>\n    <ActorEditDialog\n        :actor-id=selectedActor.id\n        :actor-name=selectedActor.name\n        :show-dialog=showEditOptionsDialog\n    >\n    </ActorEditDialog>\n    <ActorEditionForm\n        :show-dialog=showActorEditionDialog\n        :actor-id=selectedActor.id\n        :actor-name=selectedActor.name\n        :edition-type=editionFormType\n    >\n    </ActorEditionForm>\n  </div>\n</template>\n<!--\n  Perfil - Habilidades - RRSS (Perfil)\n  Imagenes - Videos (Multimedia)\n  Exp Profesional - Formacion - Premios (Experiencia)\n-->\n<script>\nimport {EventBus} from \"@/main\";\nimport {mixins} from \"../../mixins\";\nimport ActorGallery from \"@/components/ActorGallery.vue\";\nimport AdminBar from \"@/components/AdminBar.vue\";\nimport ActorEditDialog from \"@/components/ActorEditDialog.vue\";\nimport ActorEditionForm from \"@/components/ActorEditionForm.vue\";\n\nexport default {\n  name: \"AdminPanel\",\n  mixins: [mixins],\n  components: { ActorEditDialog, AdminBar, ActorGallery, ActorEditionForm },\n  data: () => ({\n    isAdmin: true,\n    showEditOptionsDialog: false,\n    showActorEditionDialog: false,\n    editionFormType: '',\n    selectedActor: {\n      id: '',\n      name: ''\n    }\n  }),\n  created() {\n    this.checkAdmin();\n\n    EventBus.$on('adminActions_adminPanel_editActor',\n        (selectedActor) => {\n          if (selectedActor){\n            this.selectedActor = selectedActor;\n            this.showEditOptionsDialog = true;\n          } else {\n            this.showEditOptionsDialog = false;\n          }\n        });\n\n    EventBus.$on('actorEditionForm_adminPanel_showEditForm',\n        (option) => {\n          if (option){\n            this.showActorEditionDialog = true;\n            this.editionFormType = option;\n          } else {\n            this.showActorEditionDialog = false;\n          }\n      });\n\n    EventBus.$on('toAdminPanel_updateActorCloseDialogs',\n        (actorName) => {\n          if (actorName != null) this.selectedActor.name = actorName;\n          if (actorName !== 'noClose') this.showActorEditionDialog = false;\n          EventBus.$emit('toActorGallery_reloadGallery')\n        });\n\n  },\n  methods: {\n    async checkAdmin(){\n      this.axios\n          .get(`/admin/check`)\n          .then( res => {\n            if (!res.data.admin) this.$router.push(`/`)\n          })\n          .catch( e => {\n            this.removeSession();\n            EventBus.$emit('alert',{\n              color: 'red',\n              type: 'error',\n              msg: e.response.data.message\n            });\n            this.$router.push(`/`);\n          });\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}